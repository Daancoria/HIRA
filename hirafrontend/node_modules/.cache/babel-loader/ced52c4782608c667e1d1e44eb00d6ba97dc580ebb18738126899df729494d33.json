{"ast":null,"code":"var _jsxFileName = \"/Users/therealpharaohfresh/HIRA/hirafrontend/src/components/FileUploader.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport styles from '../pages/ChatbotPage.module.css';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FileUploader({\n  onUploadSuccess\n}) {\n  _s();\n  const [isUploading, setIsUploading] = useState(false);\n  const handleFileUpload = async e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const validTypes = ['application/pdf', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/csv'];\n    if (!validTypes.includes(file.type)) {\n      toast.error('‚ùå Unsupported file type.');\n      return;\n    }\n    if (file.size > 2 * 1024 * 1024) {\n      toast.error('‚ùå File too large. Max 2MB.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      setIsUploading(true);\n      const response = await fetch('http://localhost:5000/upload', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        const status = response.status;\n        if (status === 413) {\n          toast.error('‚ùå Upload failed: File too large.');\n        } else if (status === 500) {\n          toast.error('‚ùå Server error. Please try again later.');\n        } else {\n          toast.error(`‚ùå Upload failed. Status: ${status}`);\n        }\n        return;\n      }\n      onUploadSuccess(file.name);\n      toast.success('‚úÖ File uploaded successfully!');\n    } catch (error) {\n      console.error('Upload error:', error);\n      if (error instanceof TypeError) {\n        toast.error('‚ùå Network error. Check your connection.');\n      } else {\n        toast.error('‚ùå Unexpected error occurred.');\n      }\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.uploadBox,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"fileInput\",\n      className: styles.uploadLabel,\n      style: {\n        opacity: isUploading ? 0.6 : 1\n      },\n      children: \"\\uD83D\\uDCCE Upload KPI File (.csv, .xls, .pdf)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"fileInput\",\n      type: \"file\",\n      accept: \".csv,.xls,.xlsx,.pdf\",\n      onChange: handleFileUpload,\n      className: styles.uploadInput,\n      disabled: isUploading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        fontSize: '0.9em',\n        color: '#888'\n      },\n      children: \"\\u23F3 Uploading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(FileUploader, \"iM8/aiMEO5Xrk8fXFL7kjRs1wVs=\");\n_c = FileUploader;\nvar _c;\n$RefreshReg$(_c, \"FileUploader\");","map":{"version":3,"names":["React","useState","styles","toast","jsxDEV","_jsxDEV","FileUploader","onUploadSuccess","_s","isUploading","setIsUploading","handleFileUpload","e","_e$target$files","file","target","files","validTypes","includes","type","error","size","formData","FormData","append","response","fetch","method","body","ok","status","name","success","console","TypeError","className","uploadBox","children","htmlFor","uploadLabel","style","opacity","fileName","_jsxFileName","lineNumber","columnNumber","id","accept","onChange","uploadInput","disabled","marginTop","fontSize","color","_c","$RefreshReg$"],"sources":["/Users/therealpharaohfresh/HIRA/hirafrontend/src/components/FileUploader.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport styles from '../pages/ChatbotPage.module.css';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface Props {\r\n  onUploadSuccess: (fileName: string) => void;\r\n}\r\n\r\nexport default function FileUploader({ onUploadSuccess }: Props) {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const validTypes = [\r\n      'application/pdf',\r\n      'application/vnd.ms-excel',\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      'text/csv',\r\n    ];\r\n\r\n    if (!validTypes.includes(file.type)) {\r\n      toast.error('‚ùå Unsupported file type.');\r\n      return;\r\n    }\r\n\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      toast.error('‚ùå File too large. Max 2MB.');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      setIsUploading(true);\r\n      const response = await fetch('http://localhost:5000/upload', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const status = response.status;\r\n\r\n        if (status === 413) {\r\n          toast.error('‚ùå Upload failed: File too large.');\r\n        } else if (status === 500) {\r\n          toast.error('‚ùå Server error. Please try again later.');\r\n        } else {\r\n          toast.error(`‚ùå Upload failed. Status: ${status}`);\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      onUploadSuccess(file.name);\r\n      toast.success('‚úÖ File uploaded successfully!');\r\n    } catch (error: any) {\r\n      console.error('Upload error:', error);\r\n\r\n      if (error instanceof TypeError) {\r\n        toast.error('‚ùå Network error. Check your connection.');\r\n      } else {\r\n        toast.error('‚ùå Unexpected error occurred.');\r\n      }\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.uploadBox}>\r\n      <label\r\n        htmlFor=\"fileInput\"\r\n        className={styles.uploadLabel}\r\n        style={{ opacity: isUploading ? 0.6 : 1 }}\r\n      >\r\n        üìé Upload KPI File (.csv, .xls, .pdf)\r\n      </label>\r\n\r\n      <input\r\n        id=\"fileInput\"\r\n        type=\"file\"\r\n        accept=\".csv,.xls,.xlsx,.pdf\"\r\n        onChange={handleFileUpload}\r\n        className={styles.uploadInput}\r\n        disabled={isUploading}\r\n      />\r\n\r\n      {isUploading && (\r\n        <div style={{ marginTop: 8, fontSize: '0.9em', color: '#888' }}>\r\n          ‚è≥ Uploading...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}